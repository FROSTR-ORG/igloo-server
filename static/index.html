<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Igloo Server</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono:wght@400&display=swap" rel="stylesheet">
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              'sharetech': ['Share Tech Mono', 'monospace'],
            },
            colors: {
              background: 'hsl(224 71% 4%)',
              foreground: 'hsl(213 31% 91%)',
              muted: 'hsl(223 47% 11%)',
              'muted-foreground': 'hsl(215.4 16.3% 56.9%)',
              accent: 'hsl(216 34% 17%)',
              'accent-foreground': 'hsl(210 40% 98%)',
              popover: 'hsl(224 71% 4%)',
              'popover-foreground': 'hsl(215 20.2% 65.1%)',
              border: 'hsl(216 34% 17%)',
              input: 'hsl(216 34% 17%)',
              card: 'hsl(224 71% 4%)',
              'card-foreground': 'hsl(213 31% 91%)',
              primary: 'hsl(210 40% 98%)',
              'primary-foreground': 'hsl(222.2 47.4% 1.2%)',
              secondary: 'hsl(222.2 47.4% 11.2%)',
              'secondary-foreground': 'hsl(210 40% 98%)',
              destructive: 'hsl(0 63% 31%)',
              'destructive-foreground': 'hsl(210 40% 98%)',
              ring: 'hsl(216 34% 17%)',
            }
          }
        }
      }
    </script>
    <link rel="stylesheet" href="/style.css">
  </head>
  <body class="bg-gradient-to-br from-gray-950 to-blue-950 text-blue-100 min-h-screen font-sharetech">
    <div class="container max-w-4xl mx-auto px-6 py-8">
          <!-- Header -->
    <div class="text-center mb-8">
      <div class="flex items-center justify-center gap-4 mb-4">
        <img src="/assets/frostr-logo-transparent.png" alt="FROSTR Logo" class="w-12 h-12">
        <h1 class="text-4xl font-bold text-blue-300">Igloo Server</h1>
      </div>
    </div>

      <!-- Main Content -->
      <div class="space-y-6">
        <!-- Environment Configuration Card -->
        <div class="bg-gray-900/30 border border-blue-900/30 backdrop-blur-sm shadow-lg rounded-lg">
          <div class="p-8 space-y-8">
            <!-- Section Header with Help -->
            <div class="flex items-center">
              <h2 class="text-blue-300 text-lg">Configure your environment settings</h2>
              <div class="ml-2 text-blue-400 cursor-pointer" id="helpIcon" title="Environment variables configure how your Igloo server behaves. These settings require a server restart to take effect.">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
              </div>
            </div>
            
                      <!-- Essential Environment Variables -->
          <div class="space-y-6">
            <!-- Group Credential -->
            <div class="space-y-3">
              <div class="flex items-center">
                <label class="text-blue-300 text-sm font-medium">Group Credential:</label>
                <div class="ml-2 text-blue-400 cursor-pointer" title="This is your group data that contains the public information about your keyset, including the threshold and group public key. It starts with 'bfgroup' and is shared among all signers.">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                </div>
              </div>
              <div class="flex gap-2">
                <input 
                  type="text" 
                  id="groupCredInput"
                  class="flex-1 bg-gray-800/50 border border-gray-700/50 text-blue-300 py-2 px-3 rounded text-sm font-mono focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all"
                  placeholder="Enter your group credential (bfgroup...)"
                />
                <button 
                  class="bg-blue-800/30 hover:bg-blue-800/50 text-blue-400 hover:text-blue-300 px-3 py-2 rounded transition-colors border border-blue-700/50 hover:border-blue-600/50"
                  id="copyGroupBtn"
                  title="Copy"
                >
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Share Credential -->
            <div class="space-y-3">
              <div class="flex items-center">
                <label class="text-blue-300 text-sm font-medium">Share Credential:</label>
                <div class="ml-2 text-blue-400 cursor-pointer" title="This is an individual secret share of the private key. Your keyset is split into shares and this is one of them. It starts with 'bfshare' and should be kept private and secure.">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                </div>
              </div>
              <div class="flex gap-2">
                <input 
                  type="password" 
                  id="shareCredInput"
                  class="flex-1 bg-gray-800/50 border border-gray-700/50 text-blue-300 py-2 px-3 rounded text-sm font-mono focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all"
                  placeholder="Enter your share credential (bfshare...)"
                />
                <button 
                  class="bg-blue-800/30 hover:bg-blue-800/50 text-blue-400 hover:text-blue-300 px-3 py-2 rounded transition-colors border border-blue-700/50 hover:border-blue-600/50"
                  id="copyShareBtn"
                  title="Copy"
                >
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Relay URLs -->
            <div class="space-y-3">
              <div class="flex items-center">
                <h3 class="text-blue-300 text-sm font-medium">Relay URLs</h3>
                <div class="ml-2 text-blue-400 cursor-pointer" title="You must be connected to at least one relay to communicate with other signers. Ensure all signers have at least one common relay to coordinate successfully.">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                </div>
              </div>
              <div class="flex gap-2">
                <input 
                  type="text" 
                  id="relaysInput"
                  class="flex-1 bg-gray-800/50 border border-gray-700/50 text-blue-300 py-2 px-3 rounded text-sm font-mono focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all"
                  placeholder="wss://relay.primal.net,wss://relay.damus.io,wss://relay.snort.social"
                />
                <button 
                  class="bg-blue-800/30 hover:bg-blue-800/50 text-blue-400 hover:text-blue-300 px-3 py-2 rounded transition-colors border border-blue-700/50 hover:border-blue-600/50"
                  id="copyRelaysBtn"
                  title="Copy"
                >
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Host Configuration -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="space-y-3">
                <div class="flex items-center">
                  <label class="text-blue-300 text-sm font-medium">Host Name:</label>
                  <div class="ml-2 text-blue-400 cursor-pointer" title="The hostname or IP address the server will bind to">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                  </div>
                </div>
                <input 
                  type="text" 
                  id="hostNameInput"
                  class="w-full bg-gray-800/50 border border-gray-700/50 text-blue-300 py-2 px-3 rounded text-sm font-mono focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all"
                  placeholder="localhost"
                />
              </div>
              
              <div class="space-y-3">
                <div class="flex items-center">
                  <label class="text-blue-300 text-sm font-medium">Host Port:</label>
                  <div class="ml-2 text-blue-400 cursor-pointer" title="The port number the server will listen on">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                  </div>
                </div>
                <input 
                  type="text" 
                  id="hostPortInput"
                  class="w-full bg-gray-800/50 border border-gray-700/50 text-blue-300 py-2 px-3 rounded text-sm font-mono focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all"
                  placeholder="8002"
                />
              </div>
            </div>

            <!-- Save Button and Status -->
            <div class="flex items-center justify-between mt-6">
              <div class="flex items-center gap-2">
                <div class="w-3 h-3 rounded-full transition-all duration-300" id="statusDot"></div>
                <span class="text-gray-300 text-sm" id="statusText">Loading...</span>
              </div>
              <button class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded text-sm font-medium transition-colors" id="saveConfigBtn">
                Save Configuration
              </button>
            </div>
          </div>
            
            <!-- Event Log Component -->
            <div class="space-y-2 mt-8 pt-6 border-t border-gray-800/30" id="eventLogSection">
              <div class="flex items-center justify-between bg-gray-800/50 p-3 rounded cursor-pointer hover:bg-gray-800/70 transition-colors" id="eventLogHeader">
                <div class="flex items-center gap-2">
                  <svg class="w-4 h-4 text-blue-400 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                  </svg>
                  <span class="text-blue-200 text-sm font-medium select-none">Event Log</span>
                  <span id="eventLogStatus" class="text-gray-500 text-sm">No events</span>
                </div>
                <div class="flex items-center gap-2">
                  <span class="text-xs text-gray-500 italic">Click to expand</span>
                  <button class="text-gray-400 hover:text-gray-300 p-1 rounded hover:bg-gray-700/50 transition-colors" id="clearLogsBtn" title="Clear logs">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                    </svg>
                  </button>
                </div>
              </div>
              
              <div class="bg-gray-900/30 rounded border border-gray-800/30 p-3 max-h-64 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900/30 space-y-2" id="eventLogContent" style="display: none;">
                <div class="text-center py-4 text-gray-500">
                  <p class="text-sm">No events logged yet</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Footer Warning -->
        <div class="bg-yellow-900/20 border border-yellow-800/30 rounded-lg p-4 text-center">
          <p class="text-yellow-400 text-sm">
            <strong>⚠️ Important:</strong> Server restart required for environment changes to take effect
          </p>
        </div>
      </div>


    </div>

    <script src="/app.js"></script>
  </body>
</html>